<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Générer QR Code avec Code et Email</title>
</head>
<body>
    <h3>Générer un QR Code</h3>
    <label for="codenumber">Code :</label>
    <input type="text" id="codenumber" placeholder="Entrez le code" required />
    <br />
    <label for="email">Email :</label>
    <input type="email" id="email" placeholder="Entrez l'email" required />
    <br />
    <button onclick="generateQRCode()">Générer QR Code</button>

    <div id="qrCodeResult" style="margin-top: 20px;"></div>

    <script>
        async function generateQRCode() {
            const codenumber = document.getElementById('codenumber').value;
            const email = document.getElementById('email').value;

            if (!codenumber || !email) {
                alert("Veuillez remplir tous les champs.");
                return;
            }

            try {
                const response = await fetch(`https://ton-api.com/qrcode?codenumber=${encodeURIComponent(codenumber)}&email=${encodeURIComponent(email)}`, {
                    method: 'GET',
                });

                if (!response.ok) {
                    throw new Error('Erreur lors de la génération du QR Code');
                }

                const blob = await response.blob();
                const imageUrl = URL.createObjectURL(blob);

                document.getElementById('qrCodeResult').innerHTML = `<img src="${imageUrl}" alt="QR Code généré" />`;
            } catch (error) {
                alert(error.message);
            }
        }
    </script>
</body>
</html>
